# Data Model: Physical AI & Humanoid Robotics Textbook

## Entities

### User
-   **Description**: Represents a student interacting with the textbook.
-   **Attributes**:
    -   `id` (UUID): Unique identifier for the user.
    -   `username` (String): User's chosen username.
    -   `email` (String): User's email address (unique).
    -   `password_hash` (String): Hashed password for security.
    -   `software_background` (String): Description of user's software development experience.
    -   `hardware_background` (String): Description of user's hardware experience.
    -   `personalization_preferences` (JSONB): Stores user's preferences for content personalization.
    -   `selected_language` (String): User's preferred language for content display (e.g., "en", "ur").
    -   `created_at` (Timestamp): Timestamp of user creation.
    -   `updated_at` (Timestamp): Last update timestamp.

### Book Content
-   **Description**: Represents a unit of instructional material within the textbook.
-   **Attributes**:
    -   `id` (UUID): Unique identifier for the content item (e.g., chapter, module, week).
    -   `title` (String): Title of the content item.
    -   `raw_text` (Text): Original English content of the chapter/module.
    -   `personalized_text` (JSONB): Stores personalized versions of the content, indexed by user profile aspects (e.g., {"beginner_software": "...", "advanced_hardware": "..."}).
    -   `urdu_text` (Text): Translated Urdu content of the chapter/module.
    -   `module_id` (UUID): Foreign key linking to a Module entity (if modules are separate entities).
    -   `order` (Integer): Display order within its parent (module/book).
    -   `created_at` (Timestamp): Timestamp of content creation.
    -   `updated_at` (Timestamp): Last update timestamp.

### Chatbot Interaction
-   **Description**: Represents a single interaction (query and response) with the RAG chatbot.
-   **Attributes**:
    -   `id` (UUID): Unique identifier for the interaction.
    -   `user_id` (UUID): Foreign key linking to the User who made the query.
    -   `query_text` (Text): The question asked by the user.
    -   `selected_context` (Text): The specific text selected by the user, if any, for context.
    -   `chatbot_response` (Text): The response generated by the RAG chatbot.
    -   `timestamp` (Timestamp): Time of the interaction.
    -   `feedback` (Integer, optional): User feedback on response quality (e.g., 1-5).

### Personalization Profile (Implicitly part of User entity - but can be separated if complex rules emerge)
-   **Description**: Defines how content should be adapted for a specific user based on their background.
-   **Attributes**:
    -   `user_id` (UUID): Foreign key linking to the User.
    -   `profile_rules` (JSONB): Defines rules or parameters for content adaptation (e.g., {"simplify_concepts": true, "focus_on_hardware": true}).

### Translation Mapping (Implicitly part of Book Content entity for simplicity, but could be separate for complex scenarios)
-   **Description**: Manages translations for different content segments.
-   **Attributes**:
    -   `content_id` (UUID): Foreign key linking to a Book Content item.
    -   `language_code` (String): Target language code (e.g., "ur").
    -   `translated_text` (Text): The translated version of the content.

## Relationships

-   `User` 1:N `Chatbot Interaction`: One user can have many chatbot interactions.
-   `Book Content` 1:N `Chatbot Interaction`: Chatbot interactions are related to specific book content.
-   `User` 1:1 `Personalization Profile`: Each user has one personalization profile.
-   `Book Content` 1:N `Translation Mapping`: One book content item can have translations into many languages (if not embedded directly).
